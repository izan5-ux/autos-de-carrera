<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Juego de Carreras de Preguntas</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    height: 100vh;
    overflow: hidden;
  }
  .track {
    position: relative;
    width: 600px;
    height: 150px;
    background: #555;
    margin-top: 40px;
    border-radius: 10px;
    border: 3px solid #fff;
    box-shadow: inset 0 0 10px #000;
  }
  .finish-line {
    position: absolute;
    right: 0;
    top: 0;
    width: 10px;
    height: 100%;
    background: repeating-linear-gradient(
      45deg,
      white,
      white 10px,
      black 10px,
      black 20px
    );
    border-left: 3px solid #fff;
    box-shadow: 0 0 8px 2px white;
  }
  .car {
    position: absolute;
    top: 50%;
    left: 0;
    width: 60px;
    height: 30px;
    background: linear-gradient(135deg, #e63946, #d62828);
    border-radius: 12px 12px 6px 6px;
    transform: translateY(-50%);
    transition: left 0.7s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 10px #ff3c3c;
  }
  .car:before {
    content: "";
    position: absolute;
    top: 5px;
    left: 10px;
    width: 40px;
    height: 20px;
    background: #fff;
    border-radius: 6px;
    box-shadow: inset 0 2px 5px #ccc;
  }
  .car.vibrate {
    animation: vibrate 0.3s ease;
  }
  @keyframes vibrate {
    0% { transform: translate(-1px, -50%) rotate(-2deg); }
    25% { transform: translate(1px, -50%) rotate(2deg); }
    50% { transform: translate(-1px, -50%) rotate(-2deg); }
    75% { transform: translate(1px, -50%) rotate(2deg); }
    100% { transform: translate(0, -50%) rotate(0); }
  }
  .question-box {
    margin-top: 30px;
    width: 600px;
    background: #333;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 15px #111;
  }
  .question-text {
    font-size: 1.3em;
    margin-bottom: 15px;
    user-select: none;
  }
  .options {
    display: flex;
    gap: 20px;
  }
  .option {
    flex: 1;
    background: #444;
    padding: 15px;
    text-align: center;
    border-radius: 10px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease, transform 0.2s ease;
    font-weight: bold;
    font-size: 1.1em;
    box-shadow: 0 0 8px #222 inset;
  }
  .option:hover {
    background-color: #555;
    transform: scale(1.05);
  }
  .option.correct {
    background-color: #28a745 !important;
    box-shadow: 0 0 15px #28a745;
    cursor: default;
  }
  .option.incorrect {
    background-color: #dc3545 !important;
    box-shadow: 0 0 15px #dc3545;
    cursor: default;
  }
  .message {
    margin-top: 25px;
    font-size: 1.7em;
    font-weight: bold;
    user-select: none;
  }
</style>
</head>
<body>

<h1>Juego de Carreras de Preguntas</h1>

<div class="track" aria-label="Pista de carreras">
  <div class="finish-line" aria-hidden="true"></div>
  <div class="car" id="car" aria-label="Auto jugador"></div>
</div>

<div class="question-box" role="region" aria-live="polite">
  <div class="question-text" id="question">¿Pregunta aparecerá aquí?</div>
  <div class="options">
    <div class="option" id="option1" role="button" tabindex="0"></div>
    <div class="option" id="option2" role="button" tabindex="0"></div>
  </div>
</div>

<div class="message" id="message" role="alert" aria-live="assertive"></div>

<!-- Sonidos embebidos como base64 -->
<audio id="sound-correct" preload="auto" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0YQAAAAA="></audio>
<audio id="sound-incorrect" preload="auto" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0YQAAAAA="></audio>

<script>
  // Preguntas ejemplo, puedes cambiar estas
  const questions = [
    { q: "¿La Tierra es plana?", options: ["Sí", "No"], correct: 1 },
    { q: "¿El agua hierve a 100°C?", options: ["Sí", "No"], correct: 0 },
    { q: "¿2+2=5?", options: ["Sí", "No"], correct: 1 },
    { q: "¿El sol es una estrella?", options: ["Sí", "No"], correct: 0 },
    { q: "¿El color del cielo es verde?", options: ["Sí", "No"], correct: 1 },
  ];

  const car = document.getElementById('car');
  const questionEl = document.getElementById('question');
  const option1El = document.getElementById('option1');
  const option2El = document.getElementById('option2');
  const messageEl = document.getElementById('message');
  const soundCorrect = document.getElementById('sound-correct');
  const soundIncorrect = document.getElementById('sound-incorrect');

  const trackWidth = 600;
  const carWidth = 60;
  const finishLinePos = trackWidth - carWidth - 13; // Ajuste por bordes
  const step = 100; // px a avanzar o retroceder

  let position = 0;
  let currentQuestionIndex = 0;

  function loadQuestion() {
    messageEl.textContent = "";
    const question = questions[currentQuestionIndex];
    questionEl.textContent = question.q;
    option1El.textContent = question.options[0];
    option2El.textContent = question.options[1];
    option1El.className = "option";
    option2El.className = "option";
    option1El.style.pointerEvents = "auto";
    option2El.style.pointerEvents = "auto";
  }

  function updateCarPosition() {
    car.style.left = position + "px";
    // Agregar vibración cuando se mueve
    car.classList.add('vibrate');
    setTimeout(() => {
      car.classList.remove('vibrate');
    }, 300);

    if (position >= finishLinePos) {
      messageEl.textContent = "¡Ganaste!";
      option1El.style.pointerEvents = "none";
      option2El.style.pointerEvents = "none";
    }
  }

  function playSound(correct) {
    if (correct) {
      soundCorrect.currentTime = 0;
      soundCorrect.play();
    } else {
      soundIncorrect.currentTime = 0;
      soundIncorrect.play();
    }
  }

  function answer(selected) {
    const question = questions[currentQuestionIndex];
    option1El.style.pointerEvents = "none";
    option2El.style.pointerEvents = "none";

    if (selected === question.correct) {
      // Correcto
      if (selected === 0) option1El.classList.add('correct');
      else option2El.classList.add('correct');

      position += step;
      if (position > finishLinePos) position = finishLinePos;

      playSound(true);
    } else {
      // Incorrecto
      if (selected === 0) option1El.classList.add('incorrect');
      else option2El.classList.add('incorrect');

      // Mostrar la correcta
      if (question.correct === 0) option1El.classList.add('correct');
      else option2El.classList.add('correct');

      position -= step;
      if (position < 0) position = 0;

      playSound(false);
    }

    updateCarPosition();

    setTimeout(() => {
      if (position < finishLinePos) {
        currentQuestionIndex = Math.floor(Math.random() * questions.length);
        loadQuestion();
      }
    }, 1500);
  }

  option1El.addEventListener('click', () => answer(0));
  option2El.addEventListener('click', () => answer(1));

  // Para accesibilidad: responder con teclado Enter o Espacio
  [option1El, option2El].forEach((el, i) => {
    el.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        answer(i);
      }
    });
  });

  loadQuestion();
  updateCarPosition();
</script>

</body>
</html>
